# 윈도우와 윈도우 객체의 관계
- 윈도우는 운영체제가 관리하는 일종의 데이터 구조체로, 일반적으로 화면에서 직사각형 영역을 차진한다.
- 이 윈도우를 응용프로그램에서 조작하려면 HWND 타입의 윈도우 핸들이 필요하고, 윈도우 핸들은 API 함수에 넘겨주면 운영체제는 내부의 데이터 구조체를 변경하고 결과적으로 화면 상의 윈도우에 반영된다.

- 프로그래머 관점에서 윈도우 핸들 = 윈도우 라고 할 수 있다.

- 윈도우 객체는 MFC의 CWnd(파생)클래스로 만든 C++ 객체를 의미한다. 객체 내부에는 m_hWnd 멤버 변수가 윈도우 핸들값을 저장한다. 

<br>

| | 생성 | 소멸 |
|-|------|------|
| 윈도우 | ::CreateWindow() | ::DestroyWindow() |
| 윈도우 객체 | 생성자 | 소멸자
<br>


- 윈도우 객체와 윈도우는 서로 다른 수명을 가진다.

- 둘은 서로 다른 시점에 생성되지만 파괴 시점은 같다.
```c++
void SomeFunc()
{
    CWnd MyWnd;                 // 윈도우 객체 생성
    MyWnd.Create(...);          // 윈도우 생성 - 내부적으로 ::CreateWindow() 호출
    MyWnd.ShowWindow(...);
}                               // 윈도우 객체와 윈도우 모드 파괴 - 내부적으로 ::Destroy() 호출
```     

- 윈도우 객체가 파괴되어도 윈도우는 파괴되지 않게 하려면 CWnd::Detach() 함수를 호출한다.

- 리턴값은 내부에 저장되어 있던 핸들값이므로 HWND 타입 변수에 저장해두면 윈도우를 제어할 수 있다.

```C++
HWND hMyWindow;

void SomeFunc()
{
    CWnd MyWnd;                 
    MyWnd.Create(...);          
    MyWnd.ShowWindow(...);

    hMyWindow = MyWnd.Detach();     // 윈도우와 윈도우 객체를 분리하여 핸들을 저장
}                                   // 윈도우 객체 파괴 - 그러나 윈도우는 파괴 X
```
- CWnd::Detach() 함수와 반대 역할을 하는 Attach() 함수도 있다.

```C++
BOOL CWnd::Attach(HWND hWndNew)
{
    m_hWnd = hWndNew;
}

HWND CWnd::Detach()
{
    HWND hWnd = m_hWnd;
    m_hWnd = NULL;
    return hWnd;
}
```
- Attach() 함수는 윈도우 핸들값을 이용해 윈도우와 객체를 연결한다.